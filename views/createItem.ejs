<%- include('partials/header') -%>
<div class="mt-5">
  <h2>Add an Item</h2>
  <form action="/items/createItem" method="POST">
    <label for="name">Name</label>
    <textarea type="text" name="name" id="name" rows="3"></textarea>
    <label for="desc">Describe your Dish</label>
    <textarea type="text" name="desc" id="desc" rows="3"></textarea>
    <label for="ingredients">List ingredients</label>
    <textarea
      type="text"
      name="ingredients"
      id="ingredients"
      rows="3"
    ></textarea>
    <label for="course">Which course is your dish</label>
    <select
      name="course"
      class="form-select"
      aria-label="Default select example"
      style="width: 30%"
    >
      <option selected value="Starter">Starter</option>
      <option value="Main">Main</option>
      <option value="Side-dish">Side-dish</option>
      <option value="Dessert">Dessert</option>
    </select>
    <button type="submit">Submit</button>
  </form>
</div>
<% if (!orders) { %>
<h3>No orders</h3>
<% }else{ for( let i = 0; i < orders.length; i++ ) { %>
<div
  class="
    container
    d-flex
    flex-row
    align-content-between
    justify-content-between
    flex-wrap
    mt-5
  "
>
  <div class="card" style="width: 30rem">
    <div class="card-body">
      <h3 class="card-title" style="border-bottom: 1px solid black">
        Ordered by : <%=orders[i].user[0].toUpperCase()+
        orders[i].user.substr(1) %>
      </h3>
      <% orders[i].itemIds.forEach((x,y)=>{ %>
      <h3><%=orders[i].itemIds[y].name %></h3>
      <h5 class="card-subtitle mb-2 text-muted">
        <%=orders[i].itemIds[y].course %>
      </h5>

      <% }) %>
      <h3>
        Notes:
        <p style="color: red"><%=orders[i].notes%></p>
      </h3>
      <h2>
        <%=orders[i].createdAt.substr(0,orders[i].createdAt.indexOf('GMT'))%>
      </h2>
      <form
        action="/orders/deleteOrder/<%= orders[i]._id %>?_method=DELETE"
        method="POST"
        class="col-3"
      >
        <button class="btn btn-primary mt-2" type="submit">Delete</button>
      </form>
    </div>
  </div>
</div>
<%}}%>

<div id="counts">
  <% for (let item of Object.keys(counts)){ %>
  <p><%= counts[item].name %></p>
  <p><%= counts[item].count %></p>
  <p><%= counts[item].ingredients %></p>
  <% } %>
</div>

<%- include('partials/footer') -%>
